{"./":{"url":"./","title":"介绍","keywords":"","body":"接口文档 DPOA API 文档说明 接口返回值定义 所有接口均遵守HTTP请求规范，但不严格遵守Http status的返回标准，如：新增不会返回201，还是使用200 查询 列表 参数 所有的列表查询均采用后端分页，参数传递需要在使用表单传递page以及size字段 返回值 查询列表的返回值统一以如下格式返回： { \"total\":0, \"content\":[{}] } 普通查询 参数 参数参考具体的API 返回值 { \"data\":{}, \"message\":\"\" } 其他接口 参数 参考具体API 返回值 { \"data\":{}, \"message\":\"\" } 异常情况 所有非200状态码均会使用特殊的返回格式，但http status会根据不同类型的错误而不同，如果参数错误的异常会是400等。 异常返回格式 { \"data\":{}, \"message\":\"\" } 更新记录 2020-07-08 【查看详情】POA上传参数更新，包含grantor,prepared变更为grantorInfo,preparedInfo. 【查看详情】Notary上传uploader参数确认 【查看详情】分享模块部分API文档 【查看详情】用户相关部分API文档 2020-07-10 【查看详情】新增按条件查询用户列表API，可选参数：角色，姓名，电话，email，生日 【查看详情】POA上传参数更新，assossor现在为直接选择，只需要上传assossor id 【查看详情】新增audit log api文档 2020-07-12 【查看详情】新增POA Consent相关API 2020-07-13 【查看详情】新增发送请求API文档 【查看详情】新增数据字典API文档 【查看详情】Request按类别查询Request列表 2020-07-14 【查看详情】新增更新Notary状态的API 【查看详情】新增接受或拒绝某个文档的访问权限的请求 【查看详情】新增compose的template列表查询API 【查看详情】新增compose的category API 【查看详情】新增compose的premeeting API 2020-07-15 【查看详情】新增将compose提交的poa激活 【查看详情】新增compose保存poa数据API 2020-07-16 【查看详情】新增refresh token API 【查看详情】新增按POA ID查询POA 2020-07-18 【查看详情】新增通知相关API 2020-07-20 【查看详情】新增按id查询notary信息API 2020-07-27 【查看详情】新增notarize文件 2020-07-28 【查询详情】POA操作权限说明 【查看详情】新增选择用户角色API 2020-08-21 【查看详情】记录用户操作日志 【查看详情】新增用户新增和更新API以及用户general consent相关API 2020-08-24 【查看详情】新增分步提交POA的API 2020-08-27 【查看详情】新增分步compose的API "},"auth/authController.html":{"url":"auth/authController.html","title":"1.1 认证相关API","keywords":"","body":"登录 使用第三方登录。目前仅集成microsoft(Azure AD) login URL POST /api/auth/login 参数 以json格式传递下列参数 username：用户名（非第三方登录使用） password：密码（非第三方登录使用） token：第三方登录后获取到的 token source：用户来源，取值为以下四种 Google Facebook AzureAD LocalSystem 返回值 { \"id\": \"cce872f3-d22d-4db1-8514-e5eabd891392\", \"username\": null, \"email\": null, \"roles\": [ \"ROLE_USER\" ], \"accessToken\": \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJjY2U4NzJmMy1kMjJkLTRkYjEtODUxNC1lNWVhYmQ4OTEzOTIiLCJpYXQiOjE1OTQwMDI4NDEsImV4cCI6MTU5NDAwNjc0MX0.zPvtXa-k8uuSqOiEDiZ_0lyngm12C3Y8w9yxCY4LBvsvz3ZFE7hS9opmMnqqJxWcjqJmE-resi9aknhvBZKxsQ\", \"tokenType\": \"Bearer\" } 后续调用API，需要在请求的header带上accessToken Authorization:Bearer token 注册 注册账号到系统，仅系统内部用户会使用该功能。 （即source = LocalSystem的账号） URL POST /api/auth/register 参数 以json格式传递下列参数 email：邮箱 source：用户来源，固定为：LocalSystem userEntity：该字段是个对象，提交用户详细信息，如下 lastName：名（必填） firstName：姓（必填） sex：性别 dateOfBirth：出生日期（必填） phoneNumber：手机号码（必填） address1：地址 address2：备用地址 city：所在城市 provinceOrTerritory：所在省市或地区 postalCode：邮政编码 返回值 { \"id\"：\"1e8d6a5bcc783a0a49901af3eaee174\", \"lastName\":\"smith\", \"firstName\":\"john\", \"sex\":\"male\", \"dateOfBirth\":\"2020-07-02\", \"phoneNumber\":\"12345678901\", \"address1\":\"\", \"address2\":\"\", \"city\":\"xxxxx\", \"provinceOrTerritory\":\"canada\", \"postalCode\":\"123456\", \"source\":\"LocalSystem\" } refresh token refresh token URL POST /api/auth/refreshToken 参数 以下参数在request body提交 refreshToken 返回值 { \"id\": \"402880e57323449c0173234b4deb0100\", \"username\": \"test@test.com\", \"email\": \"test@test.com\", \"refreshToken\": \"eyJhbGciOiJIUzUxMiJ9.eyJpYXQiOjE1OTQ4ODc2NzEsImV4cCI6MTU5NDg4OTQ4MX0.d71nuIgSe9BiXiw0IQFvba9_abnxHpZlHTeHUewStM8cLtM-Qt7ySFTPVdEHx6kD2sGexUJm2UrngmumdpqqEA\", \"roles\": [ \"ROLE_LAWYER\", \"ROLE_GRANTOR\", \"ROLE_SDM\", \"ROLE_ASSESSOR\", \"ROLE_THIRD_PARTY\", \"ROLE_NOTARY\" ], \"accessToken\": \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI0MDI4ODBlNTczMjM0NDljMDE3MzIzNGI0ZGViMDEwMCIsImlhdCI6MTU5NDg4ODE0NiwiZXhwIjoxNTk0ODg4MTc2fQ.ssiI_JWdinrFwP4WPGw8lcKY6ZjlUE-4gZY9dkvqv-U3LE8N6OqjV2L-o4Nl0JIMmX6vVDz0o4IaQvAtgbGBLw\", \"tokenType\": \"Bearer\" } "},"file/fileController.html":{"url":"file/fileController.html","title":"2.1 文件上传相关API","keywords":"","body":"上传文件 上传文件 URL POST /api/file/upload/{containerName} 参数说明 下列参数放在请求路径上： containerName：要存的数据类型，目前不太清楚具体有多少个值。需要前端做的时候提供。目前已知： POA Notary 下列参数放在表单： file：需要上传的文件 返回值 { \"id\":\"\", \"fileName\":\"\", \"containerName\":\"\", \"blobName\":\"\" } 下载文件 按文件id下载文件 URL GET /api/file/download/{fileId} 参数 以下参数在路径上提交 fileId：文件id 返回值 文件流 "},"notary/notaryController.html":{"url":"notary/notaryController.html","title":"3.1 Notary API","keywords":"","body":"上传Notary 上传Notary URL POST /api/notary/upload 参数 以下参数用json格式以request body上传： type：Document Type，文档类型 uploadNotaryFileType：上传的文档类型，有以下值 ORIGINAL_DOCUMENT CERTIFIED_NOTARIZED PHOTO_COPY uploaderInfo：对象 lastName firstName sex dateOfBirth email phoneNumber address1 address2 provinceOrTerritory city postalCode witnessList：数组，数组字段如下 lastName firstName sex dateOfBirth email phoneNumber address1 address2 provinceOrTerritory city postalCode createdIn：创建于什么地方 NotarizedIn：在什么地方公证 fileId：文件id 返回值 与上传的数据基本一致。 查询Notary列表 查询notary列表 URL GET /api/notary/query 参数 lastName phoneNumber email dateOfBirth fileId timeOfNotarization notaryPublic page size 返回值 { \"total\":10, \"content\":[{ notaryInfo... }] } 更新notary的状态 更新指定notary的状态值 URL POST /api/notary/status 参数 以下参数在request body提交 notaryId：notary id status：变更后的status值 返回值 { \"data\":null, \"message\":\"success\" } 按ID查询Notary 按ID查询Notary URL GET /api/notary/query/{notaryId} 参数 notaryId 返回值 { \"data\":{ notaryInfo }, \"message\":\"success\" } notarize 公证未被公证的公证文件 URL POST /api/notary/notarize 参数 以下参数在request body中提交 notaryId status：固定传 Verified notaryPublic notarizeProvince 返回值 { \"data\":null, \"message\":\"success\" } "},"poa/poaController.html":{"url":"poa/poaController.html","title":"4.1 PoA API","keywords":"","body":"POA上传 上传POA URL POST /api/poa/upload 参数 下列参数以json格式在request body提交： type：POA的上传方式，有以下两种值 upload compose uploadPoaFileType：上传的POA文件类型，有以下值： ORIGINAL_DOCUMENT CERTIFIED_NOTARIZED PHOTO_COPY grantorInfo：grantor，对象，字段如下： lastName firstName sex dateOfBirth email phoneNumber address1 address2 provinceOrTerritory city postalCode preparedInfo：上传人，为对象 lastName firstName sex dateOfBirth email phoneNumber address1 address2 provinceOrTerritory city postalCode poaType：poa类型，有以下值： PERSONAL_HEALTH FINANCE_PROPERTY poaParam：当poaType = FINANCE_PROPERTY时，有特殊的内容需要保存，该字段为对象类型 createdIn：poa文档创建于什么地方 activatedIn：poa文档与什么地方生效 timeFrom：从什么时候开始生效 timeTo：到什么时候失效 sdmList：数组，数组中的对象格式如下 lastName firstName sex dateOfBirth email phoneNumber address1 address2 provinceOrTerritory city postalCode witnessList：数组，数组元素格式如下： lastName firstName sex dateOfBirth email phoneNumber address1 address2 provinceOrTerritory city postalCode affidavitForActivation：这也是文件，调用文件上传需要使用单独定义的containerName进行文件上传 capacityAssessment：assessor id consentAndDirection：授权信息，可能为ID或json，待确定 fileId：上传的文件ID 返回值 和上传的内容基本一致，会多出ID。 POA更新 更新指定POA URL POST /api/poa/update/{poaId} 参数 以下参数在请求路径上提交： poaId：需要更改的POA ID 以下参数以json格式在request body中提交： 👆参考新增POA👆 返回值 和上传的数据基本一致。 POA查询 查询POA URL GET /api/poa/query 参数 以下参数通过表单上传： grantorLastName grantorPhoneNumber grantorDateOfBirth grantorEmail poaFileId poaType poaStatus timeFrom timeTo 返回值 [{ poaInfo... }] 修改指定POA状态 修改指定POA状态 URL POST /api/poa/status 参数 以下参数在request body提交： poaId：需要更新状态的POA ID status：更新为什么状态，有效的状态值如下 Activated Revoked 返回值 { \"data\":null, \"message\":\"\" } 获取指定POA的consent 获取指定POA的consent URL GET /api/poa/consent/{poaId} 参数 以下参数在路径上提交 poaId：poa id 返回值 { \"data\": [ { \"id\": \"1\", \"consent\": \"[{\\\"order\\\":1,\\\"content\\\":\\\"All references to my Lawyer or the Company herein shall include any successor or relacement lawyer(s)/law firm or future custodian of the documents referenced in this Consent and Direction for whatever reason('Cusodian'),however, such Custodian shall be bound by the terms of this Consent and Direction.\\\"},{\\\"order\\\":2,\\\"content\\\":\\\"I am providing this Consent and Direction freely, voluntarily without duress or threat from any other person, understanding and appreciating its intent to be relied on, even after my incapacity.\\\"},{\\\"order\\\":3,\\\"content\\\":\\\"The lawyer is permitted to maintain, store and keep a hardcopy or softcopy of the documents referenced in this Consent and Direction, the Lawyer is permitted to store the document electronically.\\\"},{\\\"order\\\":4,\\\"content\\\":\\\"I consent to the documents in this Consent and Direction to be uploaded/not uploaded to www.POAregistry.com. I consent to allow my name to be included in any searches of the registry with the same first name, middle name, last name and/or date of birth.\\\"},{\\\"order\\\":5,\\\"content\\\":\\\"I authorize the Lawyer to make notarial copies.\\\"},{\\\"order\\\":6,\\\"content\\\":\\\"This Consent and Direction may be executed by the undersigned in counterparts (including through the use of video witnessing) and may be delivered by facsimile or other means of electronic communication (in portable document format ('pdf') or tagged image format ('tif')) and all such counterparts, taken together, shall constitute an original document/Consent and Direction.\\\"}]\", \"prefix\": null, \"suffix\": null, \"status\": null }, { \"id\": \"2\", \"consent\": \"[{\\\"order\\\":7,\\\"content\\\":\\\"On (insert date) I signed a (insert type of POA) with (insert original law firm name and lawyer). I provided (insert original law firm) with (insert number of original documents remaining with Lawyer) original documents for safekeeping and to release it in accordance with this Consent and Direction.\\\"},{\\\"order\\\":8,\\\"content\\\":\\\"I authorize and direct the Lawyer to release or provide access to one or more copies of (insert the type of POA) to (insert who the Grantor selected as being able to have a copy of the POA) upon receiving written notice of the same and are under not required to confirm capacity of said person(s) prior to releasing said information. I authorize that copies of the document may be distributed via email or any other such electronic means.\\\"},{\\\"order\\\":9,\\\"content\\\":\\\"I further authorize that verification of (insert person from paragraph 7) shall be satisfied upon the delivery of (insert valid verification I further authorize that verification of (insert person from paragraph 7) shall be satisfied upon the delivery of (insert valid verification - ex. DL or other items raised by Security Session).\\\"},{\\\"order\\\":10,\\\"content\\\":\\\"I authorize that while I am capable, upon the request of any other person or entity (other than specified in paragraph 7), the Lawyer may disclose and/or release the following information about the POA.\\\"},{\\\"order\\\":11,\\\"content\\\":\\\"I authorize that while I am incapable, upon the request of any other person or entity (other than specified in paragraph 7), the Lawyer may disclose the following information about the POA.\\\"},{\\\"order\\\":12,\\\"content\\\":\\\"Notwithstanding anything in this Consent and Direction to the contrary, I authorize my Attorney to upload the (insert type of POA) to poaregistry.com. In the event that this clause conflicts with any other provision of this Consent and Direction, then this clause shall prevail.\\\"},{\\\"order\\\":13,\\\"content\\\":\\\"I authorize the Lawyer to destroy the original copies (updates to the system) of the Power of Attorney in the event I die without the need for a death certificate.\\\"},{\\\"order\\\":14,\\\"content\\\":\\\"I or my custodian may - This is my last in time - I will either continue to upload all subsequent POAs to this platform.\\\"},{\\\"order\\\":15,\\\"content\\\":\\\"I agree that I shall notify the company - or I shall notify the Company as or I shall indemnify the company.\\\"},{\\\"order\\\":16,\\\"content\\\":\\\"We do not guarantee - the current system doesn't - lawyer doesn't guarantee that it is the last in time.\\\"},{\\\"order\\\":17,\\\"content\\\":\\\"Consent to disbursements charge.\\\"},{\\\"order\\\":18,\\\"content\\\":\\\"Lawyer to add additional terms.\\\"},{\\\"order\\\":19,\\\"content\\\":\\\"You would want to be waiving, that if they one they know has been revoked. Received a resignation form.\\\"},{\\\"order\\\":20,\\\"content\\\":\\\"Guardian appointments by the court - revoked.\\\"},{\\\"order\\\":21,\\\"content\\\":\\\"Fiting in the afidaifts.\\\"},{\\\"order\\\":22,\\\"content\\\":\\\"Create custom space for retainer.\\\"},{\\\"order\\\":23,\\\"content\\\":\\\"Consent to lawyer changing the online status (if they know the client has revoked, resignation of SDM, death of Grantor, Guardian appointed by court - because that would automatically revoke these.\\\"}]\", \"prefix\": null, \"suffix\": null, \"status\": null } ], \"message\": \"Successful operation!\" } 变更poa consent的状态 变更指定POA的指定consent的状态 URL POST /api/poa/consent/change/status 参数 以下参数以request body提交 poaId：poa id consentId：consent id status：改变后的状态，注意：是字符串的true和false true false 返回值 { \"data\": null, \"message\": \"Successful operation!\" } ready状态的POA变更为activated 将compose方式提交的POA激活 URL POST /api/poa/ready2activated 参数 以下参数在request body提交 poaId：poa id fileId：file id 返回值 { \"data\":null, \"message\":\"success\" } 按ID查询POA信息 按ID查询POA信息 URL GET /api/poa/query/{poaId} 参数 poaId 返回值 { \"data\":{}, \"message\":\"success\" } 分步骤提交Poa 分步骤提交保存POA信息 URL POST api/poa/upload/step/{step} 参数 以下参数在request body中提交 步骤为1时 grantor：grantor ID consentList：数组，数组中的元素为对象 consent：consent内容 label：consent的label status：consent的状态，字符串的true或者false 步骤为2时 preparedInfo：创建人信息，为对象，与之前版本的用户信息提交的字段一致 步骤为3时 其他参数，参考之前的upload上传 返回值 { \"data\":{ 与提交的数据格式一致 }, \"message\":\"success\" } 查询POA Upload信息 查询POA upload中的信息，用于分步上传到一半关闭页面，后续继续修改poa信息使用 URL GET api/poa/upload/info/{poaId} 参数 poaId：poa id 返回值 { \"data\": { \"id\": \"402880eb741e5fae01741e611f4d0001\", \"name\": \"grantor xu\", \"type\": \"upload\", \"uploadPoaFileType\": null, \"grantor\": \"f96470ce-5ba9-4054-9926-95e8e368c7e5\", \"prepared\": null, \"poaType\": null, \"poaParam\": null, \"createdIn\": null, \"activatedIn\": null, \"timeFrom\": null, \"timeTo\": null, \"affidavitForActivation\": null, \"capacityAssessment\": null, \"consentAndDirection\": \"402880eb741e5fae01741e6125260002\", \"sdmMethod\": null, \"fileId\": null, \"sendNotification\": null, \"poaStatus\": \"Draft\", \"currentStep\": 1, \"createBy\": \"f616d819-5b10-4142-a9f9-66916985ffb0\", \"updateBy\": \"f616d819-5b10-4142-a9f9-66916985ffb0\", \"createdTime\": \"2020-08-24T02:51:53.281+0000\", \"updatedTime\": \"2020-08-24T02:51:53.281+0000\", \"authority\": null, \"grantorName\": null, \"preparedBy\": null, \"fileIdStr\": null, \"preparedInfo\": null, \"grantorInfo\": {}, \"assessorInfo\": null, \"sdmList\": null, \"witnessList\": null, \"consentList\": [ { \"id\": \"402880eb741e5fae01741e6125260002\", \"consent\": \"\", \"prefix\": null, \"suffix\": null, \"status\": \"true\", \"label\": \"General Consent\" } ] }, \"message\": \"Successful operation!\" } "},"poa/remark.html":{"url":"poa/remark.html","title":"4.2 POA操作权限","keywords":"","body":"POA按钮权限 POA按钮权限问题 查询POA列表后，列表行中会包含一个字段authority，用该字段进行按钮权限判断，不同值的权限如下： All：包含权限如下 update audit log share view activate：仅draft状态的POA才显示此操作 revoked：仅Activated状态的POA才显示此操作 特殊操作：consent，仅角色为Grantor时拥有此操作 Access：包含权限如下 View None或null：包含权限如下 Request "},"requests/requestsController.html":{"url":"requests/requestsController.html","title":"5. Requests相关API","keywords":"","body":"查询request列表 查询当前登录用户的request列表 URL GET /api/requests/list 参数 无 返回值 { \"incomingRequests\":[{ requestInfo... }], \"sendOutRequests\":[{ requestInfo... }] } 按类别查询request列表 按类别查询当前登录用户的request列表 URL GET /api/request/list/{type} 参数 以下参数在请求路径上提交 type incoming sendOut 返回值 { \"content\":[], \"total\":0 } 查看请求详情 查询指定请求的详细信息 URL GET /api/requests/view/{requestId} 参数 以下参数在请求路径传递： requestId：请求ID 返回值 { senderInfo:{ }, recipientInfo:{ }, poaInfo:{ }, requestInfo... } 接受或拒绝请求 接受或拒绝某个文档的访问权限请求 URL GET /api/requests/process/{requestsId}/{result} 参数 以下参数在路径上提交 requestsId：请求ID result：接受或拒绝 Accepted：接受 Declined：拒绝 返回值 { \"data\":null, \"message\":\"success\" } "},"requests/sendRequestController.html":{"url":"requests/sendRequestController.html","title":"5.2 发送请求相关API","keywords":"","body":"申请POA访问权限 发送请求到POA创建人，申请POA的访问权限 URL POST /api/poa/send/request 参数 下列参数以request body提交 reason：request 原因 poaId：请求的poaId 返回值 { \"data\":null, \"message\":\"\" } "},"share/shareController.html":{"url":"share/shareController.html","title":"6.1 Share相关API","keywords":"","body":"发送分享文件的验证码 分享文件前，发送验证码用于验证是否为本人操作 URL POST /api/share/send/verifycode 参数 无 返回值 { \"data\":\"null\", \"message\":\"Successful operation!\" } 分享文件到email 分享poa或notary文件到指定邮箱 ，校验验证码正确才会发送 URL POST /api/share/send2user/{verifyCode} 参数 以下参数在请求路径上提交： verifyCode：验证码 以下参数在request body中 entityType：分享的文件类型 PoA Notary entityId：poa id 或者 notary id recipientType：接收人类型 SDM Lawyer Doctor Bank Third_Party lastName firstName email phoneNumber faxNumber organization shareType：分享方式，fax或者email 返回值 { \"data\":\"null\", \"message\":\"Successful operation!\" } "},"user/userController.html":{"url":"user/userController.html","title":"7.1 用户信息相关API","keywords":"","body":"新数据结构对应老数据结构 lastName：givenName firstName：surname sex：extension_b5c04d56d76b4ae085b6a3c7b5379c26_sex DOB：Azure ad不支持，先不管 email：按我给你说的优先级来取 phoneNumber：extension_b5c04d56d76b4ae085b6a3c7b5379c26_phoneNumber address1：streetAddress address2：extension_b5c04d56d76b4ae085b6a3c7b5379c26_address2 city：city postalCode：postalCode provinceOrTerritory：state role：extension_b5c04d56d76b4ae085b6a3c7b5379c26_role 条件查询用户 按条件分页查询用户列表，条件包含：角色，名称，手机号码，email，生日 URL GET /api/user/query/role 参数 以下参数以表单上传： lastName firstName phoneNumber email dateOfBirth roleName：用户角色 ROLE_GRANTOR ROLE_SDM ROLE_LAWYER ROLE_ASSESSOR ROLE_THIRD_PARTY ROLE_NOTARY ROLE_WITNESS page size 返回值 { \"content\": [ { \"id\": \"402880e57323449c0173234b4deb0100\", \"username\": \"test@test.com\", \"lastName\": \"test\", \"firstName\": \"test\", \"sex\": \"male\", \"dateOfBirth\": \"2020-07-09T16:00:00.000+0000\", \"email\": \"test@test.com\", \"phoneNumber\": \"123456\", \"address1\": \"test address 1\", \"address2\": \"test address 2\", \"city\": \"test city\", \"provinceOrTerritory\": \"test province or territory\", \"postalCode\": \"1234\", \"source\": \"LocalSystem\", \"activeCode\": null, \"status\": \"Activated\", \"additionalInfo\": null, \"createdTime\": \"2020-07-07T02:22:44.000+0000\", \"updatedTime\": \"2020-07-07T02:22:46.000+0000\", \"roles\": null } ], \"total\": 1 } 查询当前登录用户信息 查询当前登录的用户信息 URL GET /api/user/current 参数 无 返回值 { \"id\": \"402880e57323449c0173234b4deb0100\", \"username\": \"test@test.com\", \"lastName\": \"test\", \"firstName\": \"test\", \"sex\": \"male\", \"dateOfBirth\": \"2020-07-09T16:00:00.000+0000\", \"email\": \"test@test.com\", \"phoneNumber\": \"123456\", \"address1\": \"test address 1\", \"address2\": \"test address 2\", \"city\": \"test city\", \"provinceOrTerritory\": \"test province or territory\", \"postalCode\": \"1234\", \"source\": \"LocalSystem\", \"activeCode\": null, \"status\": \"Activated\", \"additionalInfo\": null, \"createdTime\": \"2020-07-07T02:22:44.000+0000\", \"updatedTime\": \"2020-07-07T02:22:46.000+0000\", \"roles\": null } 选择用户角色 当用户角色为空时，需要先选择用户角色 URL POST /api/user/choose/role 参数 以下参数在request body提交 userId：user id roleName：角色名称 ROLE_GRANTOR ROLE_SDM ROLE_ASSESSOR ROLE_THIRD_PARTY ROLE_NOTARY ROLE_WITNESS 返回值 { \"data\":null, \"message\":\"success\" } 创建用户 创建用户 URL POST api/user/create 参数 参考顶部新的用户数据格式 返回值 { \"data\":null, \"message\":\"success\" } 更新用户 更新用户信息 URL POST api/user/update 参数 参考顶部新的用户数据格式 返回值 { \"data\":null, \"message\":\"success\" } 修改密码 修改当前登录用户的密码 URL POST api/user/change/password 参数 以request body提交 password 返回值 { \"data\":null, \"message\":\"success\" } 获取用户general consent 获取用户的general consent URL GET api/user/general/consent 参数 无 返回值 { \"data\":null, \"message\":\"success\" } 确认general consent 用户选择同意或是拒绝general consent URL POST api/user/change/consent 参数 以request body提交 id consent flag userId：当前登录的用户ID 返回值 { \"data\":null, \"message\":\"success\" } "},"auditlog/auditLogController.html":{"url":"auditlog/auditLogController.html","title":"8.1 Audit Log API","keywords":"","body":"查询指定文档的操作日志 查询指定POA的操作日志 URL GET /api/auditlog/query/{entityId}/{type} 参数 以下参数以表单提交 page size entityId：poa id或notary id type：查询的文档类型 Notary PoA 返回值 { \"content\":[{ \"id\":\"\", \"type\":\"\", \"entityId\":\"\", \"userIp\":\"\", \"action\":\"\", \"message\":\"\", \"userId\":\"\", \"actionTimestamp\":\"\" }], \"total\":1 } 记录操作日志 记录用户操作日志，如：下载，打印POA等操作 URL POST /api/auditlog/record 参数 在request body中提交 entityId：POA ID或者notary id entityType：PoA或者Notary action：操作，Download/Print等 返回值 { \"data\":null, \"message\":\"success\" } "},"dict/dictController.html":{"url":"dict/dictController.html","title":"9.1 数据字典API","keywords":"","body":"数据字典列表 分页查询数据字典列表 URL GET /api/dict/list 参数 以下参数在request body提交 name：选填，按name模糊查询 page size 返回值 { \"total\":0, \"content\":[] } 按NAME查询数据字典详情 按dict name查询数据字典详情 URL GET /api/dict/detail/list/{dictName} 参数 以下参数在路径上提交 dictName：dictName 返回值 { \"data\":[ { \"id\": \"1\", \"dictId\": \"1\", \"label\": \"1\", \"value\": \"value\", \"orderNumber\": 1, \"createBy\": \"1\", \"updateBy\": \"1\", \"createdTime\": \"2020-07-13T06:12:56.000+0000\", \"updatedTime\": \"2020-07-13T06:12:58.000+0000\" }, { \"id\": \"2\", \"dictId\": \"1\", \"label\": \"2\", \"value\": \"value\", \"orderNumber\": 2, \"createBy\": \"1\", \"updateBy\": \"1\", \"createdTime\": \"2020-07-13T06:13:17.000+0000\", \"updatedTime\": \"2020-07-13T06:13:21.000+0000\" } ], \"message\":\"\" } "},"compose/preMeetingController.html":{"url":"compose/preMeetingController.html","title":"10.1 pre meeting api","keywords":"","body":"保存Pre Meeting 保存Pre Meeting数据 URL POST /api/premeeting 参数 以下参数在request body提交 grantor：grantor id informationProvidedBy relationshipToGrantor email phoneNumber methodOfDiscussion content：问卷调查的参数 assessor：选择的assessor id 返回值 { \"data\":{}, \"message\":\"success\" } 按grantor id查询pre meeting的数据 按grantor id查询pre meeting的数据 URL GET /api/premeeting/{grantorId} 参数 以下参数在路径上提交 grantorId 返回值 { \"data\":{}, \"message\":\"success\" } "},"compose/templateController.html":{"url":"compose/templateController.html","title":"10.2 template api","keywords":"","body":"查询所有template 查询所有的compose template URL GET /api/tempalte/all 参数 无 返回值 [{ templateInfo }] "},"compose/categoryController.html":{"url":"compose/categoryController.html","title":"10.3 category api","keywords":"","body":"查询指定template的category列表 查询指定的compose template的category列表 URL GET /api/category/list/{templateId} 参数 以下参数在路径上提交 templateId：template id 返回值 [{ categoryInfo }] "},"compose/poaComposeDraft.html":{"url":"compose/poaComposeDraft.html","title":"10.4 poa compose draft","keywords":"","body":"保存compose draft 保存compose draft草稿 URL POST /api/poadraft/draft 参数 以下参数以request body提交 grantor templateId categories assessor flag：固定值draft 返回值 { \"data\":null, \"message\":\"success\" } 查询grantor的poa draft 查询grantor的poa draft URL GET /api/poadraft/grantor/{grantorId} 参数 以下参数在路径上提交 grantorId 返回值 { poa draft info } compose poa finalize compose poa finalize URL POST /api/poadraft/finalize 参数 以下参数在request body提交 grantor templateId categories assessor flag：固定值finalize 返回值 { \"data\":null, \"message\":\"success\" } 分步提交compose 分步提交compose URL POST api/poadraft/compose/step/{step} 参数 步骤为1时 grantor：grantor ID consentList：数组，数组中的元素为对象 consent：consent内容 label：consent的label status：consent的状态，字符串的true或者false 步骤为2时 preMeeting：此字段为对象，当前步骤主要提交pre meeting的基本数据 createdByName createdByEmail informationProvidedBy relationshipToGrantor email phoneNumber methodOfDiscussion 步骤为3时 preMeeting：此字段为对象，当前步骤主要提交 pre meeting的主要内容 content 步骤为4时 preMeeting：此字段为对象，当前步骤主要提交pre meeting中的assessor assessor：assessor id 步骤为5时 poaComposeDraft：此字段为对象，当前步骤最要提交 compose选择的template以及提交的categories内容 templateId categories 步骤为6时 poaComposeDraft：此字段为对象，当前步骤最要提交 compose中的affidavit数据 affidavitContent：为html语句，html每一对标签都必须闭合，即：，不能 步骤为7时 此步无特殊的提交参数，只需要把第6步返回的数据提交即可。 返回值 { \"data\":{ \"grantorInfo\":{ azure 用户数据结构 }, \"preMeeting\":{ pre meeting数据结构 }, \"poaComposeDraft\":{ poa compose数据结构,template和categories相关 }, \"consentList\":[ { consent } ], ....最外层为POA的数据结构 }, \"message\":\"success\" } 获取compose分步填写的信息 获取compose分步提交的信息 URL GET api/poadraft/compose/info/{poaId} 参数 在URL上提交 poaId：pod id 返回值 { \"data\":{ \"grantorInfo\":{ azure 用户数据结构 }, \"preMeeting\":{ pre meeting数据结构 }, \"poaComposeDraft\":{ poa compose数据结构,template和categories相关 }, \"consentList\":[ { consent } ], currentStep: 1, ....最外层为POA的数据结构 }, \"message\":\"success\" } "},"notice/noticeController.html":{"url":"notice/noticeController.html","title":"11.1 Notice通知相关API","keywords":"","body":"查询当前登录用户的未读通知 查询当前登录的用户的未读通知列表 URL GET /api/notice 参数 无 返回值 [{ noticeInfo }] noticeInfo字段解释： id receiverId：消息接收者ID receiverName：消息接收者Name operatorId：消息发送者ID operatorName：消息发送者Name action：操作 targetType：被操作的对象类型 targetId：被操作的对象ID createdTime：消息发送时间 type：消息类型 state：消息状态（此API比返回未读消息） Unread：未读 Readed：已读 已读当前用户所有未读消息 设置当前登录用户的所有未读消息为已读 URL GET /api/notice/read 参数 无 返回值 { \"data\":null, \"message\":\"success\" } "}}